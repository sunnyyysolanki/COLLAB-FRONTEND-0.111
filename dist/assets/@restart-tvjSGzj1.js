import{r,j as E}from"./react-kDj6t8jd.js";import{c as U,s as Q,o as xe,a as A,l as Y,b as Z}from"./dom-helpers-BsN-Z0DW.js";import{R as ye}from"./react-dom-DN4igg0M.js";function we(e){return e.code==="Escape"||e.keyCode===27}function ke(){const e=r.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function K(e){if(!e||typeof e=="function")return null;const{major:n}=ke();return n>=19?e.props.ref:e.ref}const ee=e=>!e||typeof e=="function"?e:n=>{e.current=n};function Oe(e,n){const t=ee(e),o=ee(n);return i=>{t&&t(i),o&&o(i)}}function cn(e,n){return r.useMemo(()=>Oe(e,n),[e,n])}function Ce(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e},[e]),n}function an(e){const n=Ce(e);return r.useCallback(function(...t){return n.current&&n.current(...t)},[n])}function Me(e){const n=r.useRef(e);return r.useEffect(()=>{n.current=e},[e]),n}function g(e){const n=Me(e);return r.useCallback(function(...t){return n.current&&n.current(...t)},[n])}function Te(){const e=r.useRef(!0),n=r.useRef(()=>e.current);return r.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),n.current}function je(e){const n=r.useRef(null);return r.useEffect(()=>{n.current=e}),n.current}const De=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Be=typeof document<"u",ne=Be||De?r.useLayoutEffect:r.useEffect,We=["as","disabled"];function Fe(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}function Pe(e){return!e||e.trim()==="#"}function Se({tagName:e,disabled:n,href:t,target:o,rel:i,role:s,onClick:a,tabIndex:f=0,type:m}){e||(t!=null||o!=null||i!=null?e="a":e="button");const c={tagName:e};if(e==="button")return[{type:m||"button",disabled:n},c];const h=l=>{if((n||e==="a"&&Pe(t))&&l.preventDefault(),n){l.stopPropagation();return}a==null||a(l)},p=l=>{l.key===" "&&(l.preventDefault(),h(l))};return e==="a"&&(t||(t="#"),n&&(t=void 0)),[{role:s??"button",disabled:void 0,tabIndex:n?void 0:f,href:t,target:e==="a"?o:void 0,"aria-disabled":n||void 0,rel:e==="a"?i:void 0,onClick:h,onKeyDown:p},c]}const Le=r.forwardRef((e,n)=>{let{as:t,disabled:o}=e,i=Fe(e,We);const[s,{tagName:a}]=Se(Object.assign({tagName:t,disabled:o},i));return E.jsx(a,Object.assign({},i,s,{ref:n}))});Le.displayName="Button";function Ae(e){const n=r.useRef(e);return n.current=e,n}function ln(e){const n=Ae(e);r.useEffect(()=>()=>n.current(),[])}const Ie="data-rr-ui-";function $e(e){return`${Ie}${e}`}const ie=r.createContext(U?window:void 0);ie.Provider;function H(){return r.useContext(ie)}const te=e=>!e||typeof e=="function"?e:n=>{e.current=n};function Ue(e,n){const t=te(e),o=te(n);return i=>{t&&t(i),o&&o(i)}}function _(e,n){return r.useMemo(()=>Ue(e,n),[e,n])}function dn(){return r.useState(null)}function Ke(e){const n=r.useRef(e);return n.current=e,n}function He(e){const n=Ke(e);r.useEffect(()=>()=>n.current(),[])}function _e(e=document){const n=e.defaultView;return Math.abs(n.innerWidth-e.documentElement.clientWidth)}const oe=$e("modal-open");class se{constructor({ownerDocument:n,handleContainerOverflow:t=!0,isRTL:o=!1}={}){this.handleContainerOverflow=t,this.isRTL=o,this.modals=[],this.ownerDocument=n}getScrollbarWidth(){return _e(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(n){}removeModalAttributes(n){}setContainerStyle(n){const t={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();n.style={overflow:i.style.overflow,[o]:i.style[o]},n.scrollBarWidth&&(t[o]=`${parseInt(Q(i,o)||"0",10)+n.scrollBarWidth}px`),i.setAttribute(oe,""),Q(i,t)}reset(){[...this.modals].forEach(n=>this.remove(n))}removeContainerStyle(n){const t=this.getElement();t.removeAttribute(oe),Object.assign(t.style,n.style)}add(n){let t=this.modals.indexOf(n);return t!==-1||(t=this.modals.length,this.modals.push(n),this.setModalAttributes(n),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(n){const t=this.modals.indexOf(n);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(n))}isTopModal(n){return!!this.modals.length&&this.modals[this.modals.length-1]===n}}const I=(e,n)=>U?e==null?(n||xe()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function Ge(e,n){const t=H(),[o,i]=r.useState(()=>I(e,t==null?void 0:t.document));if(!o){const s=I(e);s&&i(s)}return r.useEffect(()=>{},[n,o]),r.useEffect(()=>{const s=I(e);s!==o&&i(s)},[e,o]),o}function Ne({children:e,in:n,onExited:t,mountOnEnter:o,unmountOnExit:i}){const s=r.useRef(null),a=r.useRef(n),f=g(t);r.useEffect(()=>{n?a.current=!0:f(s.current)},[n,f]);const m=_(s,K(e)),c=r.cloneElement(e,{ref:m});return n?c:i||!a.current&&o?null:c}const Ve=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function ze(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}function Xe(e){let{onEnter:n,onEntering:t,onEntered:o,onExit:i,onExiting:s,onExited:a,addEndListener:f,children:m}=e,c=ze(e,Ve);const h=r.useRef(null),p=_(h,K(m)),l=R=>v=>{R&&h.current&&R(h.current,v)},O=r.useCallback(l(n),[n]),C=r.useCallback(l(t),[t]),M=r.useCallback(l(o),[o]),T=r.useCallback(l(i),[i]),j=r.useCallback(l(s),[s]),D=r.useCallback(l(a),[a]),x=r.useCallback(l(f),[f]);return Object.assign({},c,{nodeRef:h},n&&{onEnter:O},t&&{onEntering:C},o&&{onEntered:M},i&&{onExit:T},s&&{onExiting:j},a&&{onExited:D},f&&{addEndListener:x},{children:typeof m=="function"?(R,v)=>m(R,Object.assign({},v,{ref:p})):r.cloneElement(m,{ref:p})})}const qe=["component"];function Je(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}const Qe=r.forwardRef((e,n)=>{let{component:t}=e,o=Je(e,qe);const i=Xe(o);return E.jsx(t,Object.assign({ref:n},i))});function Ye({in:e,onTransition:n}){const t=r.useRef(null),o=r.useRef(!0),i=g(n);return ne(()=>{if(!t.current)return;let s=!1;return i({in:e,element:t.current,initial:o.current,isStale:()=>s}),()=>{s=!0}},[e,i]),ne(()=>(o.current=!1,()=>{o.current=!0}),[]),t}function Ze({children:e,in:n,onExited:t,onEntered:o,transition:i}){const[s,a]=r.useState(!n);n&&s&&a(!1);const f=Ye({in:!!n,onTransition:c=>{const h=()=>{c.isStale()||(c.in?o==null||o(c.element,c.initial):(a(!0),t==null||t(c.element)))};Promise.resolve(i(c)).then(h,p=>{throw c.in||a(!0),p})}}),m=_(f,K(e));return s&&!n?null:r.cloneElement(e,{ref:m})}function re(e,n,t){return e?E.jsx(Qe,Object.assign({},t,{component:e})):n?E.jsx(Ze,Object.assign({},t,{transition:n})):E.jsx(Ne,Object.assign({},t))}const en=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function nn(e,n){if(e==null)return{};var t={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(n.indexOf(o)>=0)continue;t[o]=e[o]}return t}let $;function tn(e){return $||($=new se({ownerDocument:e==null?void 0:e.document})),$}function on(e){const n=H(),t=e||tn(n),o=r.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>t.add(o.current),remove:()=>t.remove(o.current),isTopModal:()=>t.isTopModal(o.current),setDialogRef:r.useCallback(i=>{o.current.dialog=i},[]),setBackdropRef:r.useCallback(i=>{o.current.backdrop=i},[])})}const ue=r.forwardRef((e,n)=>{let{show:t=!1,role:o="dialog",className:i,style:s,children:a,backdrop:f=!0,keyboard:m=!0,onBackdropClick:c,onEscapeKeyDown:h,transition:p,runTransition:l,backdropTransition:O,runBackdropTransition:C,autoFocus:M=!0,enforceFocus:T=!0,restoreFocus:j=!0,restoreFocusOptions:D,renderDialog:x,renderBackdrop:R=u=>E.jsx("div",Object.assign({},u)),manager:v,container:ce,onShow:G,onHide:N=()=>{},onExit:ae,onExited:V,onExiting:le,onEnter:de,onEntering:fe,onEntered:me}=e,he=nn(e,en);const b=H(),y=Ge(ce),d=on(v),Ee=Te(),pe=je(t),[B,z]=r.useState(!t),w=r.useRef(null);r.useImperativeHandle(n,()=>d,[d]),U&&!pe&&t&&(w.current=A(b==null?void 0:b.document)),t&&B&&z(!1);const X=g(()=>{if(d.add(),P.current=Y(document,"keydown",be),F.current=Y(document,"focus",()=>setTimeout(ge),!0),G&&G(),M){var u,J;const L=A((u=(J=d.dialog)==null?void 0:J.ownerDocument)!=null?u:b==null?void 0:b.document);d.dialog&&L&&!Z(d.dialog,L)&&(w.current=L,d.dialog.focus())}}),W=g(()=>{if(d.remove(),P.current==null||P.current(),F.current==null||F.current(),j){var u;(u=w.current)==null||u.focus==null||u.focus(D),w.current=null}});r.useEffect(()=>{!t||!y||X()},[t,y,X]),r.useEffect(()=>{B&&W()},[B,W]),He(()=>{W()});const ge=g(()=>{if(!T||!Ee()||!d.isTopModal())return;const u=A(b==null?void 0:b.document);d.dialog&&u&&!Z(d.dialog,u)&&d.dialog.focus()}),Re=g(u=>{u.target===u.currentTarget&&(c==null||c(u),f===!0&&N())}),be=g(u=>{m&&we(u)&&d.isTopModal()&&(h==null||h(u),u.defaultPrevented||N())}),F=r.useRef(),P=r.useRef(),ve=(...u)=>{z(!0),V==null||V(...u)};if(!y)return null;const q=Object.assign({role:o,ref:d.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},he,{style:s,className:i,tabIndex:-1});let S=x?x(q):E.jsx("div",Object.assign({},q,{children:r.cloneElement(a,{role:"document"})}));S=re(p,l,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:ae,onExiting:le,onExited:ve,onEnter:de,onEntering:fe,onEntered:me,children:S});let k=null;return f&&(k=R({ref:d.setBackdropRef,onClick:Re}),k=re(O,C,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:k})),E.jsx(E.Fragment,{children:ye.createPortal(E.jsxs(E.Fragment,{children:[k,S]}),y)})});ue.displayName="Modal";const fn=Object.assign(ue,{Manager:se});export{fn as B,se as M,Se as a,an as b,dn as c,ln as d,K as g,cn as u};
