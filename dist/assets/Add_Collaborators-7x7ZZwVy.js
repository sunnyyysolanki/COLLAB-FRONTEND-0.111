import{r as h,j as t}from"./react-kDj6t8jd.js";import{M as i,B as f}from"./react-bootstrap-CdsT1MgL.js";import{p as d}from"./prop-types-D5nIUkaZ.js";import{u as g,c as j}from"./@tanstack-g5oh4P0D.js";import{h as C,a as S,b as _}from"./index-CcBaj4Xg.js";import"./classnames-ELZfJkp_.js";import"./@restart-tvjSGzj1.js";import"./dom-helpers-BsN-Z0DW.js";import"./react-dom-DN4igg0M.js";import"./scheduler-BNqrtbQi.js";import"./react-transition-group-DcErqrXj.js";import"./@babel-G6YR9G09.js";import"./react-router-1WkuugLQ.js";import"./cookie--_YQFYBD.js";import"./axios-DW_MHI2K.js";import"./react-redux-DpWfQt2x.js";import"./use-sync-external-store-DV0KjrHr.js";import"./@reduxjs-zIbhoCio.js";import"./redux-BXkGT1VS.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./react-toastify-Y4N22MFQ.js";import"./clsx-B-dksMZM.js";import"./jwt-decode-VWaDGczM.js";/* empty css                  */import"./socket.io-client-CDVIIGn8.js";import"./engine.io-client-C44f3zIw.js";import"./engine.io-parser-BiEtp6m2.js";import"./@socket.io-Dkula2eQ.js";import"./socket.io-parser-BBkuslX-.js";import"./markdown-to-jsx-BQQhr_-U.js";import"./@webcontainer-6WLe8uJq.js";import"./highlight.js-DQnaPH0Z.js";import"./lucide-react-CxBdCssK.js";function w({users:s,project:a}){const[x,m]=h.useState(!1),[c,p]=h.useState([]),u=g(),y=()=>{m(!0)},l=()=>{m(!1),p([])},n=j({mutationFn:async()=>(await _.post("http://localhost:3000/project/collaborator",{users:c,project_id:a._id},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).data,onSuccess:()=>{l(),u.invalidateQueries({queryKey:["project"]}),u.invalidateQueries({queryKey:["projects"]}),S("Collaborators Added Successfully")},onError:o=>{var e,r;C(((r=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:r.message)||"Something went wrong")}});function b(o){p(e=>e.includes(o)?e.filter(r=>r!==o):[...e,o])}return t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:y,className:"h-full",children:"âž• Add Collaborator"}),t.jsxs(i,{show:x,onHide:l,backdrop:"static",keyboard:!1,dialogClassName:"modal-dialog-scrollable modal-lg",children:[t.jsx(i.Header,{closeButton:!0,children:t.jsx(i.Title,{children:"Add Collaborators"})}),t.jsx(i.Body,{children:t.jsx("div",{className:"flex flex-col min-h-[63vh] gap-3 overflow-y-scroll items-center",children:s==null?void 0:s.filter(o=>{var e;return!((e=a==null?void 0:a.user)!=null&&e.some(r=>r._id===o._id))}).map(o=>t.jsx("div",{className:`h-14 flex items-center pl-6 font-bold w-full border-2 cursor-pointer 
                    ${c.includes(o._id)?"bg-blue-950 text-white":"hover:bg-gray-200"}`,onClick:()=>b(o._id),children:t.jsx("p",{className:"p-0 m-0",children:o.email})},o._id))})}),t.jsxs(i.Footer,{children:[t.jsx(f,{variant:"secondary",onClick:l,children:"Close"}),t.jsx(f,{variant:"primary",onClick:()=>n.mutate(),disabled:n.isLoading,children:n.isLoading?"Adding...":"ADD"})]})]})]})}w.propTypes={project:d.array.isRequired,project_id:d.string.isRequired,users:d.array.isRequired};export{w as default};
